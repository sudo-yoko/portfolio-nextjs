バックエンドAPIはサーバーサイドから呼び出す。、
バックエンドAPIをサーバーサイドから呼ぶ方法は、サーバーアクションまたはapiルート。
ServerActionsを使う場合の構成
action -> fetcher -> client

fetcher/sender  ->  action(BFF)     -> client -> client(axios)
fetcher/sender  ->  api Route(BFF)  -> client -> client(axios)

ファイルの命名

サンク＝引数なしの関数。呼べば実行する関数

web-to-caseをプロキシ経由で送信すると400エラーになる
・フォワードプロキシでフォームのPOST。POST + application/x-www-form-urlencoded
・プロキシのモックをurl -x http://localhost:9999 -X POST http://localhost:3001/serv～のように叩くと正常
・リクエスト先にはリクエストがとどいており、ステータス２００を返しているようですが、プロキシモックからクライアントにステータス４００が返っている
→http-proxy-agent をやめて、Axios 標準の proxy オプションを使用したところエラーが解消

サーバーアクションとAPIルートの認証

カスタムエラーの作成

ページネーション
・totalが常に取得できる前提の設計
・連打に非対応（呼び元で制御必要）

チェックリスト
・server-only, client-onlyを明記し、サーバーサイドで使用するコードとクライアントサイドで使用するコードを一つのファイル(.ts)の中に混在させない。
　記載しないものはどちらで動作しても問題の無いコードとする
・バリデーションはクライアントとBFFの両方で行っているか
・リファクタリング耐性のある実装か
    ・リファクタリングで自動で全体に反映されるか
    ・自動で反映されなくてもコンパイルエラーで検知されるか
・サーバーサイドに認証チェック
・キャッシュバスティング

TSDocはMarkdownが使える

